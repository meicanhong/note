防火墙是七层网络设备，用于监视和控制网络流量。防火墙以网络五元组为基础，以及一些额外的报文属性，来监视和控制流量。
> 网络五元组：
> 源IP、目的IP、源端口、目的端口、流量策略（HTTP/TCP/UDP/ICMP）

基于五元组，我们可以确定这条流量要从哪里来，用什么策略，去哪里。防火墙通过识别五元组，可以匹配这条流量是否匹配墙上某条策略，然后基于匹配策略作出对应动作。防火墙的策略是存在顺序的，先匹配优先级高的策略，再匹配优先级低的策略，优先级可以自定义。一般防火墙都会有一条默认策略，用于放行/拒绝所有流量。

此外，现在的防火墙设备，一般都有俩个页面，一个是终端页面，一种是Web端，所以我们可以通过输入shell或者访问api来和防火墙交互。
执行shell给防火墙终端，可以通过一些正则框架（如TestFSM）来解析返回数据。
访问api则比较简单，大部分都是返回JSON数据，解析JSON即可。

现代防火墙系统上，都是将网络属性对象化。如一个IP地址，在防火墙上会是一个地址对象，该对象拥有name、address、describe等属性。一个地址对象可能支持一个或多个IP。将网络属性对象化，也是为了更方便的使用配置防火墙。

防火墙还有许多功能，如NAT、PBR、黑白名单、负载均衡等。但都是基于五元组基础上去做拓展，理解好五元组便可以很好理解。例如深信服防火墙，有个功能是员工离职倾向分析，其原理也是分析流量的目的IP是否属于招聘网站，在这基础上做更多判断去进行智能分析。

流量经过防火墙时，不同品牌的防火墙其流量处理策略不同。比如某防火墙是先做策略匹配、再做NAT匹配、最后做PBR匹配；有些则先NAT再PBR最后策略匹配。具体是什么流量处理策略，去查询防火墙的文档即可。文档里没有说明可以致电客服解答。
